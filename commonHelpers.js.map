{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { input } from \"../main\";\nimport { page } from \"../main\";\n\n\nexport async function getImages() {\n  const URL = 'https://pixabay.com/api/';\n\n  const response = await axios.get(URL, {\n    params: {\n      key: '42513462-e11c37811c4211ba54194476f',\n      q: input,\n      lang: 'en',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { showLoader } from \"../main.js\";\nimport { hideLoader } from \"../main.js\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./pixabay-api.js\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loadBtn = document.querySelector(\".load-btn\");\nexport let maxPage;\nexport function createMarkup() {\n\tshowLoader()\n\tgetImages()\n\t\t\n\t\t.then(data => {\n\t\t\tmaxPage = data.totalHits / data.hits.length;\n\t\t\tconst images = data.hits;\n\t\t\t if (data.totalHits === 0) {\n\t\t\t\t \n\t\t\t\t iziToast.error({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Sorry, there are no images matching your search query. Please try again!`,\n\t\t\t\t });\n\t\t\t\t hideLoader();\n\t\t\t\t loadBtn.classList.add(\"hidden\");\n\t\t\t }\n\t\t\t \n\t\t\telse{\n\t\t\tconst markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n\t\t\t\treturn `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"images\" \n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t\n\t<ul class=\"detail-list\">\n\t<li class=\"detail-item\"><span class=\"bold\">Likes</span> ${likes}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Views</span> ${views}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Comments</span> ${comments}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Downloads</span> ${downloads}</li>\n\t</ul>\n</a></li>`\n\t\t\t}).join('');\n\t\t\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n\t\t\tlightbox.refresh();\n\t\t\thideLoader();\n\t\t\tloadBtn.classList.remove(\"hidden\");\n\t\t\treturn data;\n}}\n)\n\t\t.catch(error => {\n\t\tiziToast.error({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Incorrect request!`,\n\t\t\t\t });\n    })\n}\nconst lightbox = new SimpleLightbox('.gallery a', {\ncaptionsData: 'alt',\ncaptionDelay: 250,\n}) \n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { createMarkup } from \"./js/render-functions.js\";\nimport { maxPage } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nform.addEventListener('submit', serchImage);\nexport let page = 1;\nexport let input;\n\n\nfunction serchImage(event) {\n  page = 1;\n    input = form.search.value.trim();\n    event.preventDefault();\n    gallery.innerHTML = null;\n\n    if (!input) {\n    loadBtn.classList.add(\"hidden\"); \n    iziToast.error({\n      title: '',\n      position: 'topRight',\n      message: `Please enter your request.`,\n})\n    }\n    else {\n      createMarkup();\n    }\n}\n\n\nexport function showLoader() {\n  const loader = document.createElement('div');\n  loader.className = 'loader';\n  gallery.appendChild(loader);\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\n\nloadBtn.addEventListener(\"click\", data => {\n  page += 1;\n  try {\n    if (page >= maxPage) {\n    iziToast.info({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Sorry, there are no images matching your search query. Please try again!`,\n\t\t\t\t })\n\tloadBtn.classList.add(\"hidden\");\n    }\n    else {\n      createMarkup();\n      setTimeout(()=>{Scroll()},500);\n    }\n  } catch (err) {\n    iziToast.error({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Error`,\n\t\t\t\t });\n  }\n  \n})\n\nfunction Scroll() {\n  const galleryHeight =\n    gallery.firstElementChild.getBoundingClientRect().height;\n  \n  window.scrollBy({\n  top: 3 * galleryHeight,\n  behavior: \"smooth\",\n})\n}\n"],"names":["getImages","URL","input","page","gallery","loadBtn","maxPage","createMarkup","showLoader","data","images","iziToast","hideLoader","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","error","SimpleLightbox","form","serchImage","event","loader","Scroll","galleryHeight"],"mappings":"wvBAIO,eAAeA,GAAY,CAChC,MAAMC,EAAM,2BAcZ,OAZiB,MAAM,MAAM,IAAIA,EAAK,CACpC,OAAQ,CACN,IAAK,qCACL,EAAGC,EACH,KAAM,KACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,GACe,IAClB,CCVA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAC3C,IAAIC,EACJ,SAASC,GAAe,CAC9BC,EAAY,EACZR,EAAW,EAET,KAAKS,GAAQ,CACbH,EAAUG,EAAK,UAAYA,EAAK,KAAK,OACrC,MAAMC,EAASD,EAAK,KACnB,GAAIA,EAAK,YAAc,EAEtBE,EAAS,MAAM,CACd,MAAO,GACP,SAAU,WACV,QAAS,0EACf,CAAM,EACDC,IACAP,EAAQ,UAAU,IAAI,QAAQ,MAG5B,CACJ,MAAMQ,EAASH,EAAO,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACzF;AAAA,iCACsBL,CAAa;AAAA;AAAA;AAAA,UAGpCD,CAAY;AAAA,UACZE,CAAI;AAAA;AAAA;AAAA;AAAA,2DAI6CC,CAAK;AAAA,2DACLC,CAAK;AAAA,8DACFC,CAAQ;AAAA,+DACPC,CAAS;AAAA;AAAA,UAGpE,EAAE,KAAK,EAAE,EACVhB,OAAAA,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CQ,EAAS,QAAO,EAChBT,IACAP,EAAQ,UAAU,OAAO,QAAQ,EAC1BI,CACV,CAAC,CACD,EACG,MAAMa,GAAS,CAChBX,EAAS,MAAM,CACX,MAAO,GACP,SAAU,WACV,QAAS,oBACf,CAAM,CACN,CAAK,CACL,CACA,MAAMU,EAAW,IAAIE,EAAe,aAAc,CAClD,aAAc,MACd,aAAc,GACd,CAAC,EC7DKC,EAAO,SAAS,cAAc,cAAc,EAC5CpB,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAElDmB,EAAK,iBAAiB,SAAUC,CAAU,EACnC,IAAItB,EAAO,EACPD,EAGX,SAASuB,EAAWC,EAAO,CACzBvB,EAAO,EACLD,EAAQsB,EAAK,OAAO,MAAM,KAAI,EAC9BE,EAAM,eAAc,EACpBtB,EAAQ,UAAY,KAEfF,EASHK,KARFF,EAAQ,UAAU,IAAI,QAAQ,EAC9BM,EAAS,MAAM,CACb,MAAO,GACP,SAAU,WACV,QAAS,4BACf,CAAC,EAKD,CAGO,SAASH,GAAa,CAC3B,MAAMmB,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,SACnBvB,EAAQ,YAAYuB,CAAM,CAC5B,CAEO,SAASf,GAAa,CAC3B,MAAMe,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,CAGAtB,EAAQ,iBAAiB,QAASI,GAAQ,CACxCN,GAAQ,EACR,GAAI,CACEA,GAAQG,GACZK,EAAS,KAAK,CACZ,MAAO,GACP,SAAU,WACV,QAAS,0EACf,CAAM,EACLN,EAAQ,UAAU,IAAI,QAAQ,IAGzBE,IACA,WAAW,IAAI,CAACqB,GAAQ,EAAE,GAAG,EAEhC,MAAa,CACZjB,EAAS,MAAM,CACb,MAAO,GACP,SAAU,WACV,QAAS,OACf,CAAM,CACH,CAEH,CAAC,EAED,SAASiB,GAAS,CAChB,MAAMC,EACJzB,EAAQ,kBAAkB,sBAAuB,EAAC,OAEpD,OAAO,SAAS,CAChB,IAAK,EAAIyB,EACT,SAAU,QACZ,CAAC,CACD"}