{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { input } from \"../main\";\nimport { page } from \"../main\";\n\n\nexport async function getImages() {\n  const URL = 'https://pixabay.com/api/';\n\n  const response = await axios.get(URL, {\n    params: {\n      key: '42513462-e11c37811c4211ba54194476f',\n      q: input,\n      lang: 'en',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  return response.data;\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { showLoader } from \"../main.js\";\nimport { hideLoader } from \"../main.js\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./pixabay-api.js\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nexport function createMarkup() {\n\tshowLoader()\n\tgetImages()\n\t\t\n\t\t.then(data => {\n\t\t\tconsole.log(data);\n\t\t\tconst images = data.hits;\n\t\t\n\t\t\t if (data.totalHits === 0) {\n\t\t\t\t \n\t\t\t\t iziToast.error({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Sorry, there are no images matching your search query. Please try again!`,\n\t\t\t\t });\n\t\t\t\t loadBtn.classList.add(\"hidden\");\n\t\t\t\t hideLoader();\n\t\t\t }\n\t\t\t \n\t\t\telse{\n\t\t\tconst markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n\t\t\t\treturn `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"images\" \n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t\n\t<ul class=\"detail-list\">\n\t<li class=\"detail-item\"><span class=\"bold\">Likes</span> ${likes}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Views</span> ${views}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Comments</span> ${comments}</li>\n\t<li class=\"detail-item\"><span class=\"bold\">Downloads</span> ${downloads}</li>\n\t</ul>\n</a></li>`\n\t\t\t}).join('');\n\t\t\tgallery.insertAdjacentHTML(\"beforeend\", markup);\n\t\t\tlightbox.refresh();\n\t\t\thideLoader();\n\t\t\tloadBtn.classList.remove(\"hidden\");\n\t\t\treturn data;\n}}\n)\n\t\t\n\t\t.catch(error => {\n\t\tiziToast.error({\n\t\t\t\t\t title: '',\n\t\t\t\t\t position: 'topRight',\n\t\t\t\t\t message: `Incorrect request!`,\n\t\t\t\t });\n    })\n}\nconst lightbox = new SimpleLightbox('.gallery a', {\ncaptionsData: 'alt',\ncaptionDelay: 250,\n}) \n\n\n// .then(data => {\n// \t\t\tif (data.hits < 15) {\n// \t\t\t\tiziToast.info({\n// \t\t\t\t\t title: '',\n// \t\t\t\t\t position: 'topRight',\n// \t\t\t\t\t message: `Sorry, there are no images matching your search query. Please try again!`,\n// \t\t\t\t });\n// \t\t\t\tloadBtn.classList.add(\"hidden\");\n// \t\t\t}\n// \t\t}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport { getImages } from \"./js/pixabay-api.js\";\nimport { createMarkup } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nform.addEventListener('submit', serchImage);\nexport let page = 1;\nexport let input\n\n\nfunction serchImage(event) {\n    \n   input = form.search.value.trim();\n    event.preventDefault();\n    gallery.innerHTML = null;\n\n    if (!input) {\n    loadBtn.classList.add(\"hidden\"); \n    iziToast.error({\n      title: '',\n      position: 'topRight',\n      message: `Please enter your request.`,\n})\n    }\n    else {\n      createMarkup();\n    }\n}\n\n\nexport function showLoader() {\n  const loader = document.createElement('div');\n  loader.className = 'loader';\n  gallery.appendChild(loader);\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\n\n\nloadBtn.addEventListener(\"click\", data => {\n page += 1; \nif (data.hits.length<15)\n{\n\tiziToast.info({\n\t\t title: '',\n\t\t position: 'topRight',\n\t\t message: `We're sorry, but you've reached the end of search results.`,\n\t\t}); \n\t\t\tloadBtn.classList.add(\"hidden\");\n\t}\n  try {\n    createMarkup(); \n    \n  } catch (err) {\n    console.log(err);\n  }\n  \n});\n\n\nfunction Scroll() {\n  const galleryHeight =\n    gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n  top: 3 * galleryHeight,\n  behavior: \"smooth\",\n})\n}\n// async function LoadMore() {\n  \n \t// if (images < 15) {\n\t\t\t\t\n\t// \t\t\tloadBtn.classList.add(\"hidden\");\n\t// \t\t\tiziToast.info({\n\t// \t\t\t\ttitle: '',\n\t// \t\t\t\tmessage: `We're sorry, but you've reached the end of search results.`,\n\t// \t\t\t\tposition: 'topRight',\n\t// \t\t\t});\n\t\t\t\t\n\t// \t\t}\n//  if (page === maxPage) {\n//       loadBtn.classList.add(\"hidden\");\n  //     }\n// }\n//     // і обовʼязково після натискання на кнопку та закінчення запиту перевіряємо, якщо ми зараз знаходимось на останній сторінці - то ховаємо кнопку і видаляємо обробник подій!\n   \n//   }\n\n\n\n\n\n"],"names":["getImages","URL","input","page","gallery","loadBtn","createMarkup","showLoader","data","images","iziToast","hideLoader","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","error","SimpleLightbox","form","serchImage","event","loader","err"],"mappings":"6vBAIO,eAAeA,GAAY,CAChC,MAAMC,EAAM,2BAcZ,OAZiB,MAAM,MAAM,IAAIA,EAAK,CACpC,OAAQ,CACN,IAAK,qCACL,EAAGC,EACH,KAAM,KACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,GACe,IAClB,CCVA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAE3C,SAASC,GAAe,CAC9BC,EAAY,EACZP,EAAW,EAET,KAAKQ,GAAQ,CACb,QAAQ,IAAIA,CAAI,EAChB,MAAMC,EAASD,EAAK,KAEnB,GAAIA,EAAK,YAAc,EAEtBE,EAAS,MAAM,CACd,MAAO,GACP,SAAU,WACV,QAAS,0EACf,CAAM,EACDL,EAAQ,UAAU,IAAI,QAAQ,EAC9BM,QAGE,CACJ,MAAMC,EAASH,EAAO,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACzF;AAAA,iCACsBL,CAAa;AAAA;AAAA;AAAA,UAGpCD,CAAY;AAAA,UACZE,CAAI;AAAA;AAAA;AAAA;AAAA,2DAI6CC,CAAK;AAAA,2DACLC,CAAK;AAAA,8DACFC,CAAQ;AAAA,+DACPC,CAAS;AAAA;AAAA,UAGpE,EAAE,KAAK,EAAE,EACVf,OAAAA,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CQ,EAAS,QAAO,EAChBT,IACAN,EAAQ,UAAU,OAAO,QAAQ,EAC1BG,CACV,CAAC,CACD,EAEG,MAAMa,GAAS,CAChBX,EAAS,MAAM,CACX,MAAO,GACP,SAAU,WACV,QAAS,oBACf,CAAM,CACN,CAAK,CACL,CACA,MAAMU,EAAW,IAAIE,EAAe,aAAc,CAClD,aAAc,MACd,aAAc,GACd,CAAC,EC9DKC,EAAO,SAAS,cAAc,cAAc,EAC5CnB,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAElDkB,EAAK,iBAAiB,SAAUC,CAAU,EACnC,IAAIrB,EAAO,EACPD,EAGX,SAASsB,EAAWC,EAAO,CAExBvB,EAAQqB,EAAK,OAAO,MAAM,KAAI,EAC7BE,EAAM,eAAc,EACpBrB,EAAQ,UAAY,KAEfF,EASHI,KARFD,EAAQ,UAAU,IAAI,QAAQ,EAC9BK,EAAS,MAAM,CACb,MAAO,GACP,SAAU,WACV,QAAS,4BACf,CAAC,EAKD,CAGO,SAASH,GAAa,CAC3B,MAAMmB,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,SACnBtB,EAAQ,YAAYsB,CAAM,CAC5B,CAEO,SAASf,GAAa,CAC3B,MAAMe,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,CAIArB,EAAQ,iBAAiB,QAASG,GAAQ,CACzCL,GAAQ,EACLK,EAAK,KAAK,OAAO,KAEpBE,EAAS,KAAK,CACZ,MAAO,GACP,SAAU,WACV,QAAS,4DACZ,CAAG,EACAL,EAAQ,UAAU,IAAI,QAAQ,GAE/B,GAAI,CACFC,GAED,OAAQqB,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAEH,CAAC"}